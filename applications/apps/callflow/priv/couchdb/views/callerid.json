{
    "_id": "_design/callerid"
    ,"language": "javascript"
    ,"views": {
       "find_caller_id": {
           "map": "function(doc) { if(doc.pvt_deleted || typeof(doc.callerid) == 'undefined') return; switch(doc.pvt_type) {case 'device': emit( doc._id, {'callerid': doc.callerid, 'next': doc.owner} ); break;case 'user': emit( doc._id, {'callerid': doc.callerid, 'next': 'account'} ); break;case 'account': emit( 'account', {'callerid': doc.callerid} ); break;}}"
       }
    }
}


