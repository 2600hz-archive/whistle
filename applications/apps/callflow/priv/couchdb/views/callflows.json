{
    "_id": "_design/callflows"
    ,"language": "javascript"
    ,"views": {       
        "listing_by_uri": {
            "map": "function(doc) { if (doc.pvt_type != 'callflow') return; for (var n in doc.numbers) { for (var r in doc.realms) { emit(doc.numbers[n] + '@' + doc.realms[r], {'id': doc._id, 'flow': doc.flow, 'account_db': doc.pvt_account_db});}}}"
        }        
        ,"listing_by_number": {
            "map": "function(doc) { if ( doc.pvt_type != 'callflow' ) return; for (var i in doc.numbers) emit(doc.numbers[i], {'id': doc._id, 'realms': doc.realms, 'account_db': doc.pvt_account_db}); }"
        }
        ,"listing_by_realm": {
            "map": "function(doc) { if ( doc.pvt_type != 'callflow' ) return; for (var i in doc.realms) emit(doc.realms[i], {'id': doc._id, 'numbers': doc.numbers, 'account_db': doc.pvt_account_db}); }"
        }
    }
}
