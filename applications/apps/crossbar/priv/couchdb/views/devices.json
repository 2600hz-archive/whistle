{
    "_id": "_design/devices"
    ,"language": "javascript"
    ,"views": {
        "listing_by_id": {
            "map": "function(doc) { if ( doc.pvt_type != 'device') return; emit(doc._id, {'id': doc._id, 'name': doc.base.name, 'status': doc.base.status}); }"
        }
        ,"listing_by_name": {
            "map": "function(doc) { if ( doc.pvt_type != 'device') return; emit(doc.base.name,  {'id': doc._id, 'name': doc.base.name, 'status': doc.base.status}); }"
        }
        ,"sip_credentials": {
            "map": "function(doc) { if ( doc.pvt_type != 'device') return; emit([doc.sip.realm, doc.sip.username], doc.sip); }"
        }
    }
    ,"filters": {
        "export":"function(doc, req) { return ( doc.pvt_type == 'device' ); }"
       ,"export_sip":"function(doc, req) { return ( typeof doc.sip !== 'undefined' ); }"
    }
}
