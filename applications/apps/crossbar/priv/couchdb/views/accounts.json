{
    "_id":"_design/accounts"
    ,"language":"javascript"
    ,"views": {
        "listing_by_id": {
            "map": "function(doc) { if (doc.pvt_type != 'account') return; emit(doc._id, {'id': doc._id, 'name': doc.name, 'status': doc.status}); }"            
        }
        ,"listing_by_name": {
            "map": "function(doc) { if (doc.pvt_type != 'account') return; emit(doc.name, {'id': doc._id, 'name': doc.name, 'status': doc.status}); }"            
        }
        ,"listing": {
            "map":"function(doc) { if (doc.pvt_type != 'account') return; var t = doc.pvt_tree.slice(0); t.push(doc._id); emit([doc._id, t], {'id': doc._id, 'name': doc.name}); }"
        }
        ,"parent": {
            "map":"function(doc) { if (doc.pvt_type != 'account') return; var t = doc.pvt_tree.slice(0); t.push(doc._id); emit(doc._id, {'id': t.slice(-2,-1)[0]}); }"
        }
        ,"children": {
            "map":"function(doc) { if (doc.pvt_type != 'account') return; var t = doc.pvt_tree.slice(0); t.push(doc._id); emit([t.slice(-2,-1)[0], t], {'id': doc._id, 'name': doc.name}); }"
        }
        ,"descendants": {
            "map":"function(doc) { if (doc.pvt_type != 'account') return; var t = doc.pvt_tree.slice(0); t.push(doc._id); for (var i in t) { emit([t[i], t], {'id': doc._id, 'name': doc.name}); } }"
        }
    }
    ,"filters": {
        "export":"function(doc, req) { return ( doc.pvt_type == 'account' ); }"
    }
}
